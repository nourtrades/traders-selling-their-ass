<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><link rel="icon" type="image/png" href="/logo.png">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üçë</text></svg>">
<title>TRADERS FORUM // TSA INTELLIGENCE</title>
<script defer src="/_vercel/insights/script.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XLYG9PBFK7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-XLYG9PBFK7');</script>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{--matrix-green:#ffffff;--matrix-dark:#333333;--matrix-mid:#cccccc;--cod-orange:#00ff41;--cod-red:#ff1744;--cod-yellow:#ffd600;--bg-black:#0a0a0a}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--bg-black);color:var(--matrix-green);font-family:'Share Tech Mono',monospace;overflow-x:hidden;cursor:crosshair;min-height:100vh}
#matrix-rain{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;opacity:.12}
.scanlines{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(255,255,255,.03) 2px,rgba(255,255,255,.03) 4px)}
.page-wrap{position:relative;z-index:2;min-height:100vh;display:flex;flex-direction:column}
.site-nav{display:flex;align-items:center;justify-content:space-between;padding:0 20px;background:rgba(10,10,10,.9);border-bottom:1px solid var(--matrix-dark);position:sticky;top:0;z-index:100;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);height:48px}
.site-nav-logo{height:32px;width:auto;margin-right:6px}
.site-nav-brand{font-family:'Orbitron',sans-serif;font-size:12px;letter-spacing:3px;color:var(--matrix-green);text-decoration:none;white-space:nowrap;text-shadow:0 0 8px rgba(255,255,255,.3)}
.site-nav-links{display:flex;gap:4px;align-items:center}
.site-nav-link{font-family:'Orbitron',sans-serif;font-size:9px;letter-spacing:2px;color:var(--matrix-mid);text-decoration:none;padding:6px 12px;border:1px solid transparent;transition:all .2s;white-space:nowrap}
.site-nav-link:hover{color:var(--matrix-green);border-color:var(--matrix-dark);background:rgba(255,255,255,.03)}
.site-nav-link.active{color:var(--matrix-green);border-color:var(--matrix-green);background:rgba(255,255,255,.05)}
.site-nav-toggle{display:none;background:none;border:1px solid var(--matrix-dark);color:var(--matrix-green);font-size:18px;padding:4px 8px;cursor:pointer}
@media(max-width:600px){
  .site-nav-links{display:none;position:absolute;top:48px;left:0;right:0;background:rgba(10,10,10,.95);border-bottom:1px solid var(--matrix-green);flex-direction:column;padding:8px 0;backdrop-filter:blur(10px)}
  .site-nav-links.open{display:flex}
  .site-nav-link{padding:12px 20px;width:100%;text-align:left;border:none;border-bottom:1px solid rgba(255,255,255,.05)}
  .site-nav-toggle{display:block}
}
.page-header{text-align:center;padding:40px 20px 30px}
.page-title{font-family:'Orbitron',sans-serif;font-size:clamp(22px,4vw,36px);font-weight:900;letter-spacing:4px;color:var(--matrix-green);text-shadow:0 0 20px rgba(255,255,255,.3)}
.page-sub{font-size:13px;color:var(--matrix-mid);margin-top:8px;letter-spacing:1px}

/* FORUM */
.forum-section{max-width:900px;margin:0 auto;padding:0 20px 60px;width:100%}
.forum-tabs{display:flex;gap:0;border-bottom:1px solid var(--matrix-dark)}
.forum-tab{flex:1;padding:14px 8px;background:rgba(10,10,10,.2);border:1px solid var(--matrix-dark);border-bottom:none;color:var(--matrix-mid);font-family:'Orbitron',sans-serif;font-size:10px;letter-spacing:2px;text-align:center;cursor:pointer;transition:all .2s}
.forum-tab:hover{background:rgba(255,255,255,.03);color:var(--matrix-green)}
.forum-tab.active{background:rgba(255,255,255,.05);color:var(--matrix-green);border-color:var(--matrix-green);border-bottom:2px solid var(--matrix-green)}
.forum-tab .tab-count{display:block;font-size:18px;margin-bottom:4px}
.forum-body{border:1px solid var(--matrix-dark);border-top:none;background:rgba(10,10,10,.2);min-height:400px}
.forum-compose{padding:16px;border-bottom:1px solid rgba(255,255,255,.08)}
.forum-compose-row{display:flex;gap:8px}
.forum-name-input{width:120px;background:rgba(0,0,0,.4);border:1px solid var(--matrix-dark);color:var(--matrix-green);font-family:'Share Tech Mono',monospace;font-size:12px;padding:10px;outline:none}
.forum-msg-input{flex:1;background:rgba(0,0,0,.4);border:1px solid var(--matrix-dark);color:var(--matrix-green);font-family:'Share Tech Mono',monospace;font-size:12px;padding:10px;outline:none;resize:none;min-height:40px}
.forum-msg-input:focus,.forum-name-input:focus{border-color:var(--matrix-green)}
.forum-post-btn{padding:10px 18px;background:transparent;border:1px solid var(--matrix-green);color:var(--matrix-green);font-family:'Orbitron',sans-serif;font-size:9px;letter-spacing:2px;cursor:pointer;transition:all .2s;white-space:nowrap}
.forum-post-btn:hover{background:var(--matrix-green);color:#000}
.forum-posts{max-height:600px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:var(--matrix-dark) transparent}
.forum-post{padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.05);transition:background .2s}
.forum-post:hover{background:rgba(255,255,255,.02)}
.forum-post-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.forum-post-author{font-family:'Orbitron',sans-serif;font-size:10px;letter-spacing:2px;color:var(--cod-yellow);display:flex;align-items:center;gap:6px}
.author-badge{font-size:7px;padding:2px 5px;letter-spacing:1px;border-radius:2px}
.badge-verified{background:rgba(255,255,255,.1);border:1px solid var(--matrix-green);color:var(--matrix-green)}
.badge-anon{background:rgba(255,255,255,.05);border:1px solid var(--matrix-dark);color:var(--matrix-dark)}
.author-link{color:var(--cod-yellow);text-decoration:none;cursor:pointer}
.author-link:hover{text-decoration:underline}
.forum-post-time{font-size:10px;color:var(--matrix-dark)}
.forum-post-body{font-size:13px;color:var(--matrix-green);line-height:1.6;opacity:.85}
.forum-post-actions{display:flex;gap:12px;margin-top:8px}
.forum-post-action{font-size:10px;color:var(--matrix-dark);cursor:pointer;transition:color .2s;background:none;border:none;font-family:'Share Tech Mono',monospace;padding:0}
.forum-post-action:hover{color:var(--matrix-green)}
.forum-replies{margin-left:20px;border-left:2px solid rgba(255,255,255,.08);padding-left:12px}
.forum-reply-form{display:none;padding:8px 0;margin-top:6px}
.forum-reply-form.show{display:flex;gap:6px}
.forum-reply-input{flex:1;background:rgba(0,0,0,.3);border:1px solid var(--matrix-dark);color:var(--matrix-green);font-family:'Share Tech Mono',monospace;font-size:11px;padding:8px;outline:none}
.forum-reply-btn{padding:8px 12px;background:transparent;border:1px solid var(--matrix-green);color:var(--matrix-green);font-family:'Orbitron',sans-serif;font-size:8px;letter-spacing:1px;cursor:pointer}
.forum-reply-btn:hover{background:var(--matrix-green);color:#000}
.forum-empty{text-align:center;padding:40px;color:var(--matrix-dark);font-size:12px;letter-spacing:2px}
.forum-like-count{color:var(--cod-yellow)}
.footer{text-align:center;padding:30px 20px;border-top:1px solid var(--matrix-dark);font-size:10px;color:var(--matrix-dark);letter-spacing:2px;margin-top:auto}
@media(max-width:768px){
  .forum-compose-row{flex-direction:column}
  .forum-name-input{width:100%}
  .forum-tab{font-size:8px;letter-spacing:1px;padding:10px 4px}
  .forum-tab .tab-count{font-size:14px}
}
</style>
</head>
<body>
<canvas id="matrix-rain"></canvas>
<div class="scanlines"></div>
<div class="page-wrap">
  <nav class="site-nav">
    <a href="/" class="site-nav-brand"><img src="/logo.png" alt="TSA" class="site-nav-logo"></a>
    <div class="site-nav-links">
      <a href="/" class="site-nav-link">üìÅ DOSSIERS</a>
      <a href="/quiz.html" class="site-nav-link">üîç QUIZ</a>
      <a href="/forum.html" class="site-nav-link active">üí¨ FORUM</a>
      <a href="/report.html" class="site-nav-link">üõ°Ô∏è REPORT</a>
      <a href="/login.html" class="site-nav-link" id="navAuth">üë§ LOGIN</a>
    </div>
    <button class="site-nav-toggle" onclick="document.querySelector('.site-nav-links').classList.toggle('open')" aria-label="Menu">‚ò∞</button>
  </nav>
  <div class="page-header">
    <div class="page-title">üí¨ TRADERS FORUM</div>
    <div class="page-sub">Discuss stocks, forex, crypto ‚Äî and call out scammers. Anonymous. Uncensored.</div>
  </div>
  <div class="forum-section">
    <div class="forum-tabs">
      <div class="forum-tab active" onclick="switchForum('stocks')" id="ftab_stocks"><span class="tab-count">üìä</span>STOCKS</div>
      <div class="forum-tab" onclick="switchForum('forex')" id="ftab_forex"><span class="tab-count">üí±</span>FOREX</div>
      <div class="forum-tab" onclick="switchForum('crypto')" id="ftab_crypto"><span class="tab-count">ü™ô</span>CRYPTO</div>
      <div class="forum-tab" onclick="switchForum('general')" id="ftab_general"><span class="tab-count">üí¨</span>GENERAL</div>
    </div>
    <div class="forum-body">
      <div class="forum-compose" id="composeSection">
        <div id="composeLoggedIn" style="display:none">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
            <span style="font-family:'Orbitron',sans-serif;font-size:9px;letter-spacing:2px;color:var(--cod-yellow)" id="postingAs">POSTING AS: ‚Äî</span>
            <a href="/profile.html" style="font-size:9px;color:var(--matrix-mid);text-decoration:none;border:1px solid var(--matrix-dark);padding:3px 8px">PROFILE</a>
          </div>
          <div class="forum-compose-row">
            <textarea class="forum-msg-input" placeholder="Start a discussion..." id="forumMsg" rows="2" maxlength="1000"></textarea>
            <button class="forum-post-btn" onclick="postForumMessage()">POST</button>
          </div>
        </div>
        <div id="composeAnon">
          <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
            <span style="font-family:'Orbitron',sans-serif;font-size:9px;letter-spacing:2px;color:var(--matrix-dark)">POSTING ANONYMOUSLY</span>
            <a href="/login.html" style="font-size:9px;color:var(--matrix-green);text-decoration:none;border:1px solid var(--matrix-green);padding:3px 8px">LOGIN FOR IDENTITY ‚Üí</a>
          </div>
          <div class="forum-compose-row">
            <textarea class="forum-msg-input" placeholder="Post anonymously..." id="forumMsgAnon" rows="2" maxlength="1000"></textarea>
            <button class="forum-post-btn" onclick="postAnonMessage()">POST ANON</button>
          </div>
        </div>
      </div>
      <div class="forum-posts" id="forumPosts">
        <div class="forum-empty">Loading discussions...</div>
      </div>
    </div>
  </div>
  <div class="footer">TSA INTELLIGENCE DIVISION // TRADERSSELLINGASS.COM</div>
</div>
<script>
var canvas=document.getElementById('matrix-rain'),ctx=canvas.getContext('2d');
function rc(){canvas.width=innerWidth;canvas.height=innerHeight}rc();addEventListener('resize',rc);
var ch='„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥0123456789',fs=14,col=~~(canvas.width/fs),dr=Array(col).fill(1);
function dm(){ctx.fillStyle='rgba(0,0,0,0.05)';ctx.fillRect(0,0,canvas.width,canvas.height);ctx.fillStyle='#00ff41';ctx.font=fs+'px monospace';for(var i=0;i<dr.length;i++){ctx.fillText(ch[~~(Math.random()*ch.length)],i*fs,dr[i]*fs);if(dr[i]*fs>canvas.height&&Math.random()>.975)dr[i]=0;dr[i]++}}
setInterval(dm,35);addEventListener('resize',function(){col=~~(canvas.width/fs);dr=Array(col).fill(1)});

var SUPABASE_URL='https://kjeqzwfxtshgerzkaiqg.supabase.co';
var SUPABASE_ANON_KEY='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtqZXF6d2Z4dHNoZ2VyemthaXFnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE4OTcyNTEsImV4cCI6MjA4NzQ3MzI1MX0.nypjzpnw2hvRWpQ-KxJQvpecDZSiruG5Bm5ixWbSD0I';
var sb=null,currentUser=null,currentProfile=null;

(function(){var s=document.createElement('script');s.src='https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2';s.onload=async function(){
  sb=window.supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);
  var sess=await sb.auth.getSession();
  if(sess.data.session){
    currentUser=sess.data.session.user;
    var pr=await sb.from('profiles').select('*').eq('id',currentUser.id).single();
    currentProfile=pr.data;
    document.getElementById('composeLoggedIn').style.display='block';
    document.getElementById('composeAnon').style.display='none';
    document.getElementById('postingAs').textContent='POSTING AS: '+(currentProfile?currentProfile.display_name:'Agent');
  }
  loadForumPosts();
};document.head.appendChild(s)})();

var currentForum='stocks';
function switchForum(channel){currentForum=channel;document.querySelectorAll('.forum-tab').forEach(function(t){t.classList.remove('active')});document.getElementById('ftab_'+channel).classList.add('active');loadForumPosts()}

async function loadForumPosts(){
  var container=document.getElementById('forumPosts');
  container.innerHTML='<div class="forum-empty">Loading...</div>';
  try{
    if(!sb)throw new Error('No connection');
    var resp=await sb.from('forum_posts').select('*').eq('channel',currentForum).is('parent_id',null).order('created_at',{ascending:false}).limit(50);
    if(resp.error)throw resp.error;
    var posts=resp.data||[];
    if(!posts.length){container.innerHTML='<div class="forum-empty">No posts yet. Be the first to start a discussion.</div>';return}
    var postIds=posts.map(function(p){return p.id});
    var repliesResp=await sb.from('forum_posts').select('*').in('parent_id',postIds).order('created_at',{ascending:true});
    var allReplies=repliesResp.data||[];
    var replyMap={};allReplies.forEach(function(r){if(!replyMap[r.parent_id])replyMap[r.parent_id]=[];replyMap[r.parent_id].push(r)});
    var likesResp=await sb.from('forum_likes').select('post_id').in('post_id',postIds.concat(allReplies.map(function(r){return r.id})));
    var likeCounts={};(likesResp.data||[]).forEach(function(l){likeCounts[l.post_id]=(likeCounts[l.post_id]||0)+1});
    var html='';posts.forEach(function(p){html+=renderPost(p,likeCounts[p.id]||0,replyMap[p.id]||[],likeCounts)});
    container.innerHTML=html;
  }catch(e){container.innerHTML='<div class="forum-empty">Could not load posts. Try again later.</div>'}
}

function escHtml(s){if(!s)return'';return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}
function getTimeAgo(ts){var d=Math.floor((Date.now()-new Date(ts).getTime())/1000);if(d<60)return'just now';if(d<3600)return Math.floor(d/60)+'m ago';if(d<86400)return Math.floor(d/3600)+'h ago';return Math.floor(d/86400)+'d ago'}

function renderAuthor(p){
  var isAnon=!p.user_id||p.is_anonymous;
  if(isAnon){
    return '<span class="forum-post-author"><span>'+escHtml(p.author_name)+'</span><span class="author-badge badge-anon">ANON</span></span>';
  }else{
    return '<span class="forum-post-author"><a href="/profile.html?id='+p.user_id+'" class="author-link">'+escHtml(p.author_name)+'</a><span class="author-badge badge-verified">‚úì VERIFIED</span></span>';
  }
}

function renderPost(p,likes,replies,lc){
  var t=getTimeAgo(p.created_at);
  var h='<div class="forum-post" id="fpost_'+p.id+'"><div class="forum-post-header">'+renderAuthor(p)+'<span class="forum-post-time">'+t+'</span></div><div class="forum-post-body">'+escHtml(p.body)+'</div><div class="forum-post-actions"><button class="forum-post-action" onclick="likePost(\''+p.id+'\')">‚ñ≤ <span class="forum-like-count">'+(likes||0)+'</span></button><button class="forum-post-action" onclick="toggleReply(\''+p.id+'\')">‚Ü© REPLY</button></div><div class="forum-reply-form" id="freply_'+p.id+'"><input class="forum-reply-input" placeholder="Reply..." id="freply_input_'+p.id+'" maxlength="500"><button class="forum-reply-btn" onclick="postReply(\''+p.id+'\')">SEND</button></div>';
  if(replies.length){h+='<div class="forum-replies">';replies.forEach(function(r){var rt=getTimeAgo(r.created_at);h+='<div class="forum-post"><div class="forum-post-header">'+renderAuthor(r)+'<span class="forum-post-time">'+rt+'</span></div><div class="forum-post-body">'+escHtml(r.body)+'</div><div class="forum-post-actions"><button class="forum-post-action" onclick="likePost(\''+r.id+'\')">‚ñ≤ <span class="forum-like-count">'+(lc[r.id]||0)+'</span></button></div></div>'});h+='</div>'}
  return h+'</div>';
}

function genAnonName(){return'ANON-'+Math.random().toString(36).substr(2,4).toUpperCase()}

async function postForumMessage(){
  var body=document.getElementById('forumMsg').value.trim();
  if(!body){document.getElementById('forumMsg').style.borderColor='var(--cod-red)';return}
  var name=currentProfile?currentProfile.display_name:'Agent';
  try{await sb.from('forum_posts').insert({channel:currentForum,author_name:name,body:body,parent_id:null,user_id:currentUser.id,is_anonymous:false});document.getElementById('forumMsg').value='';loadForumPosts()}catch(e){alert('Could not post.')}
}

async function postAnonMessage(){
  var body=document.getElementById('forumMsgAnon').value.trim();
  if(!body){document.getElementById('forumMsgAnon').style.borderColor='var(--cod-red)';return}
  var anonName=genAnonName();
  try{await sb.from('forum_posts').insert({channel:currentForum,author_name:anonName,body:body,parent_id:null,user_id:null,is_anonymous:true});document.getElementById('forumMsgAnon').value='';loadForumPosts()}catch(e){alert('Could not post.')}
}

async function postReply(parentId){
  var input=document.getElementById('freply_input_'+parentId),body=input.value.trim();
  if(!body)return;
  var name,uid,isAnon;
  if(currentUser&&currentProfile){name=currentProfile.display_name;uid=currentUser.id;isAnon=false}
  else{name=genAnonName();uid=null;isAnon=true}
  try{await sb.from('forum_posts').insert({channel:currentForum,author_name:name,body:body,parent_id:parentId,user_id:uid,is_anonymous:isAnon});input.value='';loadForumPosts()}catch(e){alert('Could not reply.')}
}

function toggleReply(id){var f=document.getElementById('freply_'+id);f.classList.toggle('show');if(f.classList.contains('show'))f.querySelector('input').focus()}
async function likePost(id){try{await sb.from('forum_likes').insert({post_id:id});loadForumPosts()}catch(e){}}
</script>
</body>
</html>
